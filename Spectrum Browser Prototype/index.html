<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spectrum Browser</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      overflow-y: scroll;
    }

    body {
      font-family: 'Airbnb Cereal VF', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #141414;
      color: #ffffff;
      min-height: 100vh;
      line-height: 1.5;
    }

    .page {
      padding: 60px 80px;
      max-width: 1400px;
      margin: 0 auto;
      min-height: 100vh;
    }

    @media (max-width: 700px) {
      .page {
        padding: 40px 24px;
      }
    }

    .page-header {
      margin-bottom: 60px;
    }

    .page-title {
      font-size: 42px;
      font-weight: 500;
      letter-spacing: -0.5px;
      margin-bottom: 8px;
    }

    .page-subtitle {
      font-size: 16px;
      color: #888;
      font-weight: 400;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }

    @media (max-width: 1100px) {
      .card-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 700px) {
      .card-grid {
        grid-template-columns: 1fr;
      }
    }

    .project-card {
      background: #212121;
      border: 1px solid #2a2a2a;
      border-radius: 16px;
      padding: 32px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      color: inherit;
      display: block;
    }

    .project-card:hover {
      background: #292929;
      border-color: #3a3a3a;
      transform: translateY(-2px);
    }

    .project-card-name {
      font-size: 20px;
      font-weight: 500;
      margin-bottom: 16px;
      line-height: 1.3;
    }

    .project-card-meta {
      font-size: 14px;
      color: #777;
    }

    .project-card-meta span {
      color: #555;
    }

    .fab {
      position: fixed;
      bottom: 40px;
      right: 40px;
      height: 56px;
      padding: 0 24px;
      border-radius: 28px;
      background: #fff;
      border: none;
      color: #141414;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: inherit;
      text-decoration: none;
    }

    .fab:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 28px rgba(0, 0, 0, 0.5);
    }

    .fab:active {
      transform: scale(0.98);
    }

    .fab-icon {
      width: 20px;
      height: 20px;
    }

    .fab-icon svg {
      width: 100%;
      height: 100%;
    }

    .section-header {
      font-size: 14px;
      font-weight: 500;
      color: #999;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 60px;
      margin-bottom: 24px;
    }

    .project-card {
      position: relative;
    }

    .project-card:hover .overflow-btn {
      opacity: 1;
    }

    .overflow-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 28px;
      height: 28px;
      border-radius: 6px;
      border: none;
      background: transparent;
      color: #666;
      font-size: 16px;
      cursor: pointer;
      opacity: 0;
      transition: all 0.15s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .overflow-btn:hover {
      background: #333;
      color: #fff;
    }

    .dropdown-menu {
      position: absolute;
      top: 48px;
      right: 16px;
      background: #252525;
      border: 1px solid #3a3a3a;
      border-radius: 12px;
      padding: 8px;
      min-width: 140px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-8px);
      transition: all 0.15s ease;
    }

    .dropdown-menu.open {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 8px;
      color: #ccc;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .dropdown-item:hover {
      background: #333;
      color: #fff;
    }

    .dropdown-item svg {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }

    .project-card.no-title {
      padding-top: 48px;
    }

    .project-card.no-title .project-card-name {
      display: none;
    }

    .dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
    }

    .dialog-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .dialog {
      background: #1e1e1e;
      border: 1px solid #333;
      border-radius: 20px;
      padding: 32px;
      width: 100%;
      max-width: 420px;
      box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
      transform: scale(0.95) translateY(10px);
      transition: all 0.2s ease;
    }

    .dialog-overlay.open .dialog {
      transform: scale(1) translateY(0);
    }

    .dialog-title {
      font-size: 24px;
      font-weight: 500;
      margin-bottom: 28px;
      color: #fff;
    }

    .dialog-field {
      margin-bottom: 20px;
    }

    .dialog-label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: #999;
      margin-bottom: 8px;
    }

    .dialog-label .optional {
      color: #666;
      font-weight: 400;
    }

    .dialog-input,
    .dialog-textarea {
      width: 100%;
      padding: 14px 16px;
      background: #141414;
      border: 1px solid #333;
      border-radius: 12px;
      color: #fff;
      font-size: 16px;
      font-family: inherit;
      outline: none;
      transition: border-color 0.15s ease;
    }

    .dialog-input:focus,
    .dialog-textarea:focus {
      border-color: #555;
    }

    .dialog-input::placeholder,
    .dialog-textarea::placeholder {
      color: #555;
    }

    .dialog-textarea {
      min-height: 80px;
      resize: vertical;
    }

    .dialog-actions {
      display: flex;
      gap: 12px;
      margin-top: 28px;
      justify-content: flex-end;
    }

    .dialog-btn {
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      font-family: inherit;
      border: none;
    }

    .dialog-btn.cancel {
      background: transparent;
      border: 1px solid #333;
      color: #999;
    }

    .dialog-btn.cancel:hover {
      border-color: #555;
      color: #fff;
      background: #252525;
    }

    .dialog-btn.create {
      background: #fff;
      color: #141414;
    }

    .dialog-btn.create:hover {
      background: #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="page-header">
      <h1 class="page-title">Spectrum Browser</h1>
      <p class="page-subtitle">Motion specs for design and engineering</p>
    </div>

    <div class="card-grid" id="projectGrid"></div>

    <h2 class="section-header">Archive</h2>
    <div class="card-grid" id="archiveGrid"></div>

    <h2 class="section-header">Unnamed Projects</h2>
    <div class="card-grid" id="unnamedGrid"></div>

    <button class="fab" onclick="openCreateDialog()">
      <span class="fab-icon"><svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="10" y1="4" x2="10" y2="16"/><line x1="4" y1="10" x2="16" y2="10"/></svg></span>
      <span>Create Project</span>
    </button>

    <div class="dialog-overlay" id="dialogOverlay" onclick="closeCreateDialog()">
      <div class="dialog" onclick="event.stopPropagation()">
        <h2 class="dialog-title">Create Project</h2>
        <div class="dialog-field">
          <label class="dialog-label">Project name</label>
          <input type="text" class="dialog-input" autofocus>
        </div>
        <div class="dialog-field">
          <label class="dialog-label">Description <span class="optional">(optional)</span></label>
          <textarea class="dialog-textarea"></textarea>
        </div>
        <div class="dialog-actions">
          <button class="dialog-btn cancel" onclick="closeCreateDialog()">Cancel</button>
          <button class="dialog-btn create">Create</button>
        </div>
      </div>
    </div>

    <div class="dialog-overlay" id="renameDialogOverlay" onclick="closeRenameDialog()">
      <div class="dialog" onclick="event.stopPropagation()">
        <h2 class="dialog-title">Rename Project</h2>
        <div class="dialog-field">
          <label class="dialog-label">Project name</label>
          <input type="text" class="dialog-input" id="renameInput">
        </div>
        <div class="dialog-actions">
          <button class="dialog-btn cancel" onclick="closeRenameDialog()">Cancel</button>
          <button class="dialog-btn create" onclick="submitRename()">Rename</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const projects = [
      { name: "AI Search", specs: 4, updated: "2 days ago", author: "@jonas · @remington" },
      { name: "Hotels, ID Scanning, Search x AI", specs: 8, updated: "4 days ago", author: "@remington" },
      { name: "Calendar 2.0", specs: 6, updated: "1 week ago", author: "@devon · @jonas" },
      { name: "PDP Native", specs: 10, updated: "1 week ago", author: "@jonas" },
      { name: "PDP Desktop", specs: 4, updated: "2 weeks ago", author: "@jonas · @devon" },
      { name: "Search & Discovery", specs: 5, updated: "2 weeks ago", author: "@remington" },
      { name: "Host App - Reservations", specs: 7, updated: "3 weeks ago", author: "@devon · @remington" },
      { name: "Menu Motion", specs: 3, updated: "3 weeks ago", author: "@jonas" },
    ];

    const archivedProjects = [
      { name: "Passport Tab", specs: 3, updated: "6 months ago", author: "@remington · @jonas" },
      { name: "Messages - Media Player", specs: 4, updated: "8 months ago", author: "@devon" },
      { name: "Quality", specs: 2, updated: "10 months ago", author: "@jonas" },
      { name: "DLS Motion Article", specs: 5, updated: "1 year ago", author: "@remington · @devon" },
    ];

    const unnamedProject = { specs: 24, updated: "1 week ago", author: "@jonas · @devon · @remington" };

    function renderCard(project, index, isArchived) {
      const menuId = isArchived ? `archive-menu-${index}` : `menu-${index}`;
      const action = isArchived ? 'unarchive' : 'archive';
      const actionLabel = isArchived ? 'Unarchive' : 'Archive';
      const iconPath = isArchived
        ? '<path d="M21 8v13H3V8M1 3h22v5H1zM10 12h4"></path>'
        : '<path d="M21 8v13H3V8M1 3h22v5H1zM10 12h4"></path>';

      return `
        <a href="project.html?name=${encodeURIComponent(project.name)}" class="project-card" data-index="${index}" data-archived="${isArchived}">
          <div class="project-card-name">${project.name}</div>
          <div class="project-card-meta">${project.specs} specs <span>·</span> Updated ${project.updated}</div>
          <div class="project-card-meta">${project.author}</div>
          <button class="overflow-btn" onclick="event.preventDefault(); event.stopPropagation(); toggleMenu('${menuId}')">⋯</button>
          <div class="dropdown-menu" id="${menuId}">
            <div class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); renameProject(${index}, ${isArchived})">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Rename
            </div>
            <div class="dropdown-item" onclick="event.preventDefault(); event.stopPropagation(); ${action}Project(${index})">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                ${iconPath}
              </svg>
              ${actionLabel}
            </div>
          </div>
        </a>
      `;
    }

    function renderUnnamedCard() {
      return `
        <a href="unnamed.html" class="project-card">
          <div class="project-card-name">24 specs</div>
          <div class="project-card-meta">${unnamedProject.updated}</div>
          <div class="project-card-meta">${unnamedProject.author}</div>
        </a>
      `;
    }

    function renderGrids() {
      document.getElementById('projectGrid').innerHTML = projects.map((p, i) => renderCard(p, i, false)).join('');
      document.getElementById('archiveGrid').innerHTML = archivedProjects.map((p, i) => renderCard(p, i, true)).join('');
      document.getElementById('unnamedGrid').innerHTML = renderUnnamedCard();
    }

    function toggleMenu(menuId) {
      document.querySelectorAll('.dropdown-menu').forEach(menu => {
        if (menu.id !== menuId) menu.classList.remove('open');
      });
      document.getElementById(menuId).classList.toggle('open');
    }

    function closeAllMenus() {
      document.querySelectorAll('.dropdown-menu').forEach(menu => menu.classList.remove('open'));
    }

    let renameTarget = null;

    function renameProject(index, isArchived) {
      renameTarget = { index, isArchived };
      const list = isArchived ? archivedProjects : projects;
      const project = list[index];
      document.getElementById('renameInput').value = project.name;
      document.getElementById('renameDialogOverlay').classList.add('open');
      setTimeout(() => document.getElementById('renameInput').focus(), 100);
      closeAllMenus();
    }

    function closeRenameDialog() {
      document.getElementById('renameDialogOverlay').classList.remove('open');
      renameTarget = null;
    }

    function submitRename() {
      if (renameTarget) {
        const list = renameTarget.isArchived ? archivedProjects : projects;
        const newName = document.getElementById('renameInput').value.trim();
        if (newName) {
          list[renameTarget.index].name = newName;
          renderGrids();
        }
      }
      closeRenameDialog();
    }

    function archiveProject(index) {
      const [project] = projects.splice(index, 1);
      archivedProjects.unshift(project);
      renderGrids();
      closeAllMenus();
    }

    function unarchiveProject(index) {
      const [project] = archivedProjects.splice(index, 1);
      projects.push(project);
      renderGrids();
      closeAllMenus();
    }

    document.addEventListener('click', (e) => {
      if (!e.target.closest('.overflow-btn') && !e.target.closest('.dropdown-menu')) {
        closeAllMenus();
      }
    });

    renderGrids();

    function openCreateDialog() {
      document.getElementById('dialogOverlay').classList.add('open');
    }

    function closeCreateDialog() {
      document.getElementById('dialogOverlay').classList.remove('open');
    }

    // Close dialog on Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCreateDialog();
        closeRenameDialog();
      }
      if (e.key === 'Enter' && renameTarget) {
        submitRename();
      }
    });
  </script>
</body>
</html>
